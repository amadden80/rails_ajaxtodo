= form_for @task do |f|
  = f.label :name
  = f.text_field :name, autofocus: true
  = f.label :desc
  = f.text_field :desc
  = f.label :duedate
  = f.text_field :duedate
  = f.label :priority_id
  / = f.select :priority_id, Priority.all.map{|priority| [priority.name, priority.id]}, :include_blank => true, :prompt => "-- Choose Priority --"
  / Removed the blank and prompt so that the user must choose a priority
  = f.collection_select :priority_id, @priorities, :id, :name
  = f.submit id: 'submit', class: 'button success small'
  = f.submit id: 'edit-submit', class: 'button success small hidden', value: 'Update Task'

%table#tasks
  %thead
    %tr
      %th
      %th
        = link_to 'Name', '#', id: 'name-sort'
      %th
        = link_to 'Desc', '#', id: 'desc-sort'
      %th
        = link_to 'Duedate', '#', id: 'duedate-sort'
        %th
  %tbody
    - @tasks.each do |task|
      %tr{:'data-task-id' => task.id, style: "background-color: #{task.priority.color}"}
        %td.arrows
          = link_to increase_urgency_task_path(task), class: 'up-arrow-link' do
            %i.general.foundicon-up-arrow
          = link_to decrease_urgency_task_path(task), class: 'down-arrow-link' do
            %i.general.foundicon-down-arrow
        %td.name
          = task.name
        %td.desc
          = task.desc
        %td.duedate
          = task.duedate
        %td.urgency-index.hidden
          = task.priority.urgency_index
        %td.priority-id.hidden
          = task.priority.id
        %td.options
          / =link_to 'View', '#', class: 'button view-button small', :'data-id' => task.id
          =link_to 'Delete', '#', class: 'button delete-button small alert'
          =link_to 'Edit', '#', class: 'button edit-button small'

= javascript_include_tag 'tasks'
















